<!DOCTYPE html>
<html>
    <head>
        <title> JavaScript - Lab4 </title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>
    <body>

        <h1> Agreement Page </h1>
        <form name="mainform" id="mainform" action="" class="basic-grey">
            <div id="content" class="contentBox">
                <fieldset>

                    <legend>Personal information</legend> 
                    <label for="fullname">Name:</label> 
                    <input id="fullname" name="name" type="text" size="30" placeholder="Full name" />
                    <span id="fullname_err"></span>

                    <label for="email">E-mail:</label> 
                    <input id="email" name="email" type="text" size="30" placeholder="sample@email.com" />
                    <span id="email_err"></span>

                    <label for="phone">Phone:</label> 
                    <input id="phone" name="phone" type="text" size="30" placeholder="xxx-xxx-xxxx" />
                    <span id="phone_err"></span>

                    <label for="description">Description:</label> 
                    <textarea id="description"></textarea>
                    <span id="description_err"></span>

                </fieldset>
            </div>



            <div id="section2" class="contentBox">

                <p> Please read and scroll the following document and agree to the terms and conditions. </p>

                <div class="scrollBoxWrapper">
                    <div id="agreeScroll" class="scrollBox">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla tincidunt libero sed mi egestas cursus. Mauris turpis odio, lacinia sed purus a, tincidunt tincidunt tortor. Ut molestie diam non lorem aliquet cursus. Suspendisse potenti. Phasellus in odio enim. Sed volutpat, purus ac laoreet pellentesque, sapien urna varius ipsum, eget volutpat nulla neque at felis. Curabitur blandit vitae nulla vitae consectetur. Pellentesque pellentesque orci leo, a pretium ante cursus vitae. Vestibulum venenatis vehicula aliquet. Pellentesque imperdiet aliquet odio quis viverra. Aliquam tincidunt aliquet euismod. In id ornare nunc, quis sodales nunc. Aliquam venenatis sed lacus eget tristique.
                        </p>
                        <p>
                            Nullam at odio eu urna dictum consectetur. Proin vitae vulputate odio, viverra imperdiet est. Aenean quam lectus, vehicula vitae euismod nec, luctus eget elit. Quisque consectetur non nisi tempor tempus. Etiam eleifend ipsum neque, sit amet cursus lectus feugiat sit amet. Curabitur laoreet, est suscipit imperdiet consequat, tortor diam venenatis mi, eget convallis est sem quis felis. Sed suscipit lorem scelerisque magna porttitor auctor. Aenean eget dui dignissim, iaculis tortor ut, blandit orci.
                        </p>
                        <p>
                            Duis iaculis sem neque, vitae imperdiet velit fringilla et. Nullam nunc justo, venenatis sit amet justo vel, convallis scelerisque metus. Quisque nec sodales lectus. Praesent sagittis augue sed dui euismod elementum. Maecenas vel nulla id massa pulvinar facilisis. Quisque aliquam nulla velit. In viverra tempus erat vitae egestas.
                        </p>
                        <p>
                            Nunc nec dapibus ante. Nullam dictum ut sem mollis pulvinar. Quisque tincidunt non erat vel convallis. Ut metus nibh, euismod in ultricies vel, congue eget metus. Sed laoreet lacinia sollicitudin. Mauris dictum diam et gravida ullamcorper. Fusce libero leo, ultricies pellentesque justo vitae, adipiscing dictum metus. Aenean convallis elit a iaculis imperdiet.
                        </p>
                        <p>
                            Cras aliquet neque et rhoncus mollis. Ut rhoncus elit neque, sit amet ullamcorper purus venenatis quis. Etiam molestie, libero nec commodo vestibulum, libero erat consequat lorem, eu elementum quam lacus et eros. Cras vitae lacus id felis euismod ullamcorper. Cras et leo quis tortor molestie vehicula. Sed lobortis mauris quis eleifend posuere. Suspendisse iaculis ultrices massa. Vivamus a libero vel mauris feugiat elementum. 
                        </p>
                    </div>
                </div>



                <label for="agree"> <input type="radio" id="agree" name="agreeForm" value="agree" disabled="disabled" />  I <strong>agree</strong> to the terms and conditions of the document</label>
                <br />
                <label for="notagree"> <input type="radio" id="notagree" name="agreeForm" value="notagree" disabled="disabled" />  I <strong>do not agree</strong> to the terms and conditions of the document</label>

                <br /><br />
                <input type="submit" id="submitAgreement" value="Continue" />
            </div>
        </form>
        <div id ="validData">
            
            
        </div>

        <script type="text/javascript">
            
            
            var objDiv = document.querySelector('div.scrollBox');

            var nameLbl = document.querySelector('#content > fieldset > label:nth-child(2)');
            var emailLbl = document.querySelector('#content > fieldset > label:nth-child(5)');
            var phoneLbl = document.querySelector('label[for="phone"]');
            var descriptionLbl = document.querySelector('#content > fieldset > label:nth-child(11)');
            var agreeBtnLbl = document.querySelector('#section2 > label:nth-child(3)');
            var disagreeBtnLbl = document.querySelector('#section2 > label:nth-child(5)');
            var newDiv = document.querySelector('#validData');
            


            objDiv.addEventListener('scroll', checkPosition);

            function checkPosition() {
                console.clear();
                console.log(objDiv.scrollTop); //current position of the scroll bar
                console.log(objDiv.scrollHeight); //total height of the div
                console.log(objDiv.offsetHeight); //What you can see on page

                if (objDiv.scrollTop == (objDiv.scrollHeight - objDiv.offsetHeight)) {
                    console.log('bottom');
                    agree.disabled = false;
                    notagree.disabled = false;
                }
            }
                
                var form = document.querySelector('#mainform');


                form.addEventListener('submit', checkForm);

                function checkForm(e) {

                    e.preventDefault(); //must stop form and validate before submit
                    var validData = true;
                    var name = document.querySelector('#fullname');
                    var email = document.querySelector('#email');
                    var phone = document.querySelector('#phone');
                    var description = document.querySelector('#description');
                    var radioAgreeBtn = document.querySelector('#agree');
                    var radioDisagreeBtn = document.querySelector('#notagree');
                    console.log('form submited');
                    // console.log is great for debuging your code
                    console.log(email.value);                    
                    // email has the attribute value, we use it to see if
                    // a user has filled it out.
                    
                    
                    if (email.value === '') {
                        emailLbl.classList.add('error');
                        validData = false;
                    }
                    else{
                         emailLbl.classList.remove('error');
                    }                   
                    if (name.value === '') {
                        nameLbl.classList.add('error');
                        validData = false;
                    }
                    else
                    {
                        nameLbl.classList.remove('error');                               
                    }
                    if (phone.value === '') {
                        phoneLbl.classList.add('error');
                        validData = false;
                    }
                    else{
                        phoneLbl.classList.remove('error');
                    }
                    if (description.value === '') {
                        descriptionLbl.classList.add('error');
                        validData = false;
                    }
                    else{
                        descriptionLbl.classList.remove('error');
                    }
                    if (radioAgreeBtn.checked === false && radioDisagreeBtn.checked === false) {
                        agreeBtnLbl.classList.add('error');
                        disagreeBtnLbl.classList.add('error');
                        validData = false;
                    }
                    else{
                        agreeBtnLbl.classList.remove('error');
                        disagreeBtnLbl.classList.remove('error');
                    }
                    
                    
                    if(validData === true)
                    {                                           
                        var html = '';
                        html = '<p>'+ name.value + '</p>' +
                               '<p>'+ email.value + '</p>' +
                               '<p>'+ phone.value + '</p>' +
                               '<p>'+ description.value + '</p>';
                       
                       if(radioAgreeBtn.checked === true)
                       {
                           html += '<p>' + radioAgreeBtn.value + '</p>';
                       }
                       else{
                           html += '<p>' + radioDisagreeBtn.value + '</p>';
                       }
                       
                                
                        newDiv.innerHTML += html;
                        
                        form.classList.remove('show');
                        form.classList.add('hide');
                        
                        //div.classList.add('show');
                    }
                    
                    
                    

                    console.log(email);
                }
            




        </script>



    </body>
</html>